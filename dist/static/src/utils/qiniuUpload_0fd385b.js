define("src/utils/qiniuUpload",function(require,exports){"use strict";function a(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(exports,"__esModule",{value:!0}),require("node_modules/qiniu-js/dist/qiniu");var c=require("src/utils/http"),_=a(c),g=window.Qiniu,v="/Moxie.swf";exports.default=function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=c.maxFileSize,h=c.extensions,U=c.UploadFile,b=c.onProgress,k=c.onUploaded,w=c.onError;return _.default.get("/api/cbs/v11/upload/token").then(function(a){return a.data[0].accessUrl}).then(function(c){return g.uploader({domain:c,uptoken_url:"/api/cbs/v11/image/token",browse_button:a,max_file_size:(y||4194304)+"b",auto_start:!0,get_new_uptoken:!0,save_key:!0,unique_names:!1,filters:{prevent_duplicates:!1,mime_types:[{title:"Images",extensions:h||"jpg,jpeg,png,webp"}]},multi_selection:!1,flash_swf_url:v,runtimes:"html5,flash,html4",init:{UploadFile:function(a,c){"function"==typeof U&&U(c.id,c.name)},UploadProgress:function(a,c){"function"==typeof b&&b(c.id,{size:c.size,percent:c.percent,loaded:c.loaded,speed:c.speed,time:(c.size-c.loaded)/parseInt(c.speed,10)})},FileUploaded:function(a,_,g){if("function"==typeof k){var v=JSON.parse(g).key;k(_.id,v,c+"/"+v)}},Error:function(a,c,_){"function"==typeof w&&(_=-602===c.code?"不允许选择重复文件":-601===c.code?"支持文件格式错误":_||c.message||"上传出错,请稍后再试",w(c.file.key,_))},UploadComplete:function(){}}})})}});